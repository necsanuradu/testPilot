import React, { useState, useEffect } from "react";
import testPilot from "../testPilot/test-pilot";

const instantiateTestsOrAnyOtherName = () => {
  testPilot.testSuite = {
    firstTest: {
      test: "innerText has same value as size state",
      property: ["textContent", "3 houses", "toMatch"],
      props: { size: "3" },
    },
    secondTest: [
      { test: "NOT render", render: ["false"], props: { size: 1 } },
      { test: "render", render: ["true"], props: { size: 2 } },
    ],
    thirdTest: {
      test: "check mathPow() function value",
      state: [9, "toEqual"],
    },
    fourthTest: {
      test: "has attribute data-main-div with value set as true",
      attribute: ["data-main-div", "true", "toEqual"],
    },
    fifthTest: [
      {
        test: "to have class .card",
        property: ["classList.contains('card')", true, "toEqual"],
      },
      {
        test: "to not have class .card-header",
        property: ["classList.contains('card-header')", false, "toEqual"],
      },
    ],
  };

  testPilot.recordState(mathPow(3, 2), "thirdTest");
};

let mathPow = (value, pow) => {
  return Math.pow(value, pow);
};

const SomeComponentForTestPilotNoTest = (props) => {
  instantiateTestsOrAnyOtherName();

  const [color, setColor] = useState(props.color);
  const [size, setSize] = useState(props.size);

  useEffect(() => {
    setSize(props.size);
  });

  return testPilot.render(
    <div>
      <div className="card mx-5 bg-light" test-suite="fifthTest">
        <div
          className="card-header"
          data-main-div="true"
          test-suite="fourthTest"
        >
          {color}
        </div>
        <div className="card-body" test-suite="firstTest">
          {size} houses
        </div>

        {size % 2 === 0 && (
          <div className="card-footer" test-suite="secondTest">
            component SomeComponentForTestPilot, <br /> not tested, tests will
            be generated by testPilot
          </div>
        )}
      </div>
    </div>
  );
};

export default SomeComponentForTestPilotNoTest;
